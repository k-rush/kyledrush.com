
<!DOCTYPE html>
<head>
<title>District 40 - Alcoholics Anonymous - Seattle</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="shortcut icon" href="images/aa.ico">

<link rel="stylesheet" href="layout/styles/style.css" type="text/css" />
<link rel="stylesheet" href="bootstrap/css/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="jquery-ui/jquery-ui.css" type="text/css" />
<link rel="stylesheet" href="jquery-ui/jquery-ui.structure.css" type="text/css" />
<link rel="stylesheet" href="jquery-ui/jquery-ui.theme.css" type="text/css" />
<link rel='stylesheet' href='fullcalendar/fullcalendar.min.css' />

<script src='fullcalendar/moment.min.js'></script>
<script type="text/javascript" src="layout/scripts/jquery.js"></script>
<script type="text/javascript" src="jquery-ui/jquery-ui.js"></script>
<script src='fullcalendar/fullcalendar.min.js'></script>
<script src="layout/scripts/jquery.ba-hashchange.js"></script>

<script>
function onLoadContainer() {
  //debugger;

  /** Full calendarize the full calendar. */
  $('#calendar').fullCalendar({
        //implement events calendar here.
  });

  var days = {'0':'Sunday','1':'Monday','2':'Tuesday','3':'Wednesday','4':'Thursday','5':'Friday','6':'Saturday'};

  /** Get the meetings data into array, format it to display.*/
  //$.getJSON('https://area72aa.org/wp-admin/admin-ajax.php?action=meetings', function( data ) {
  $.getJSON('meetings.json', function( data ) {
    $("#home-meetings").append('<table class="table"><thead><tr><td>Meeting</td><td>Location</td><td>Time</td><td>Day</td></tr></thead><tbody>');
    //Building the meetings list
    data.forEach(function(element, i) {
        if(element["notes"] == "District 40") {
          $("#home-meetings").append("<tr><<td>" + element['name'] + "</td><td>" +  element['location'] + "</td><td>" + element['time'] + " - " + element['end_time'] + "</td><td>" + days[element['day']] + "</td></tr>"
            );
        }
      });
    $("#home-meetings").append("</tbody></table>");
    $("#home-meetings-loading").hide();

  });


};
var cache = new Object();
//{'':$('<div class="item">').appendTo("#content-container").load('home.html')};

/** Hash-change, simple cache function */
$(function() {
    //debugger;
    //cache[''] = $('<div class="item">').appendTo("#content-container").load('home.html');
    $(window).hashchange(function() {

      //alert("hashchange");

      var url = window.location.hash.replace('#', '');
      if(url == "") {
        url = "home.html";
      }
      
      $("#content-container").children(":visible").hide();
      
      if ( cache[url] ) {  
        //debugger;
        cache[url].show();
      } else {
          cache[url] = $('<div class="item">').appendTo("#content-container").load(url, function() {
          $("#content-container").ready(function() {
            onLoadContainer();
          });

        });

      }
    });

    $(window).hashchange();

});
</script>

</head>

<body>

  <div id="header" class="row-fluid">

    <div class="row-fluid">

      <div id="logo" class="span6">
        <a href="#"><h1>District 40</h1></a>
        <h2>Alcoholics Anonymous</h2>
      </div>

      <div id="location" class="span5">
        <h4>"We must carry the message, else we ourselves can wither and those who haven't been given the truth may die" 
          <br>(from A.A.'s Legacy of Service by Bill W.)</h4>
      </div>

    </div>
  </div>

  <div id = "navbar" class="row-fluid">

    <div id="nav" class="span10 offset1">
      
        <ul>
          <li><a class="update-content" href="#home.html">Meetings</a></li>
          <li><a class="update-content" href="#events.html">Events</a></li>
          <li><a class="update-content" href="#contact.html">Contact</a></li>
        </ul>
        </ul>
    </div>

    
  </div>
      
    

  <!-- MAIN CONTENT AREA - Ajax calls will fill this with html. -->
  <div id="content-container" class="row-fluid">
    
  </div>



</body>
</html>